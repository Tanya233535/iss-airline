<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru"
      th:replace="~{layout :: layout(~{::body})}">

<body th:with="pageTitle=${crewMember?.memberId == null ? 'Добавить члена экипажа' : 'Редактировать члена экипажа'}">

<h1 th:text="${crewMember?.memberId == null ? 'Добавить члена экипажа' : 'Редактировать члена экипажа'}"></h1>

<div class="form-container">
    <form th:action="@{/crew}" th:object="${crewMember}" method="post">
        <input type="hidden" th:field="*{memberId}"/>

        <label>Фамилия:</label>
        <input type="text" th:field="*{lastName}" maxlength="50"/>
        <div class="error-message" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"></div>

        <label>Имя:</label>
        <input type="text" th:field="*{firstName}" maxlength="50"/>
        <div class="error-message" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></div>

        <label>Отчество:</label>
        <input type="text" th:field="*{middleName}" maxlength="50"/>
        <div class="error-message" th:if="${#fields.hasErrors('middleName')}" th:errors="*{middleName}"></div>

        <label>Должность:</label>
        <input type="text" th:field="*{role}" maxlength="50"/>
        <div class="error-message" th:if="${#fields.hasErrors('role')}" th:errors="*{role}"></div>

        <label>Квалификация:</label>
        <input type="text" th:field="*{qualification}" maxlength="50"/>
        <div class="error-message" th:if="${#fields.hasErrors('qualification')}" th:errors="*{qualification}"></div>

        <label>Стаж:</label>
        <input type="number" th:field="*{experienceYears}" min="0"/>
        <div class="error-message" th:if="${#fields.hasErrors('experienceYears')}" th:errors="*{experienceYears}"></div>

        <label>Прикреплён к рейсу:</label>
        <select th:field="*{flight}">
            <option th:value="${null}">— Без рейса —</option>
            <option th:each="f : ${flights}"
                    th:value="${f.id}"
                    th:text="${f.flightNo + ' (' + f.departureAirport + ' → ' + f.arrivalAirport + ')'}">
            </option>
        </select>

        <button type="submit">Сохранить</button>
    </form>

    <a th:href="@{/crew}" class="button">← Назад к списку</a>
</div>

</body>
</html>
